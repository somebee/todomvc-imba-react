!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.imba=f()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){!function(){require("./imba"),require("./core.events"),require("./dom"),require("./dom.events"),require("./dom.static"),require("./selector")}()},{"./core.events":2,"./dom":4,"./dom.events":3,"./dom.static":5,"./imba":6,"./selector":7}],2:[function(require,module,exports){!function(){function emit__(event,args,node){for(var prev,cb,ret;(prev=node)&&(node=node.next);)(cb=node.listener)&&(ret=node.path&&cb[node.path]?args?cb[node.path].apply(cb,args):cb[node.path]():args?cb.apply(node,args):cb.call(node)),node.times&&--node.times<=0&&(prev.next=node.next,node.listener=null)}Imba.listen=function(obj,event,listener,path){var $1,cbs,list,tail;return cbs=obj.__listeners__||(obj.__listeners__={}),list=cbs[$1=event]||(cbs[$1]={}),tail=list.tail||(list.tail=list.next={}),tail.listener=listener,tail.path=path,list.tail=tail.next={},tail},Imba.once=function(obj,event,listener){var tail=Imba.listen(obj,event,listener);return tail.times=1,tail},Imba.unlisten=function(obj,event,cb,meth){var node,prev,meta=obj.__listeners__;if(meta&&(node=meta[event]))for(;(prev=node)&&(node=node.next);)if(node==cb||node.listener==cb){prev.next=node.next,node.listener=null;break}},Imba.emit=function(obj,event,params){var cb;(cb=obj.__listeners__)&&(cb[event]&&emit__(event,params,cb[event]),cb.all&&emit__(event,[event,params],cb.all))},Imba.observeProperty=function(observer,key,trigger,target,prev){return prev&&"object"==typeof prev&&Imba.unlisten(prev,"all",observer,trigger),target&&"object"==typeof target&&Imba.listen(target,"all",observer,trigger),this}}()},{}],3:[function(require,module,exports){!function(){function iter$(a){return a?a.toArray?a.toArray():a:[]}var win=(document,window),hasTouchEvents=win&&void 0!==win.ontouchstart;Imba.RingBuffer=function(len){void 0===len&&(len=10),this._array=[],this._keep=len,this._head=0},Imba.RingBuffer.prototype.__head={name:"head"},Imba.RingBuffer.prototype.head=function(v){return this._head},Imba.RingBuffer.prototype.setHead=function(v){return this._head=v,this},Imba.RingBuffer.prototype.push=function(obj){var i=this._head++;return this._array[i%this._keep]=obj,i},Imba.RingBuffer.prototype.last=function(){return this._array[this._head%this._keep]},Imba.Pointer=function(){this.setButton(-1),this.setEvents(new Imba.RingBuffer(10)),this.setEvent({x:0,y:0,type:"uninitialized"})},Imba.Pointer.prototype.__phase={name:"phase"},Imba.Pointer.prototype.phase=function(v){return this._phase},Imba.Pointer.prototype.setPhase=function(v){return this._phase=v,this},Imba.Pointer.prototype.__prevEvent={name:"prevEvent"},Imba.Pointer.prototype.prevEvent=function(v){return this._prevEvent},Imba.Pointer.prototype.setPrevEvent=function(v){return this._prevEvent=v,this},Imba.Pointer.prototype.__button={name:"button"},Imba.Pointer.prototype.button=function(v){return this._button},Imba.Pointer.prototype.setButton=function(v){return this._button=v,this},Imba.Pointer.prototype.__event={name:"event"},Imba.Pointer.prototype.event=function(v){return this._event},Imba.Pointer.prototype.setEvent=function(v){return this._event=v,this},Imba.Pointer.prototype.__dirty={name:"dirty"},Imba.Pointer.prototype.dirty=function(v){return this._dirty},Imba.Pointer.prototype.setDirty=function(v){return this._dirty=v,this},Imba.Pointer.prototype.__events={name:"events"},Imba.Pointer.prototype.events=function(v){return this._events},Imba.Pointer.prototype.setEvents=function(v){return this._events=v,this},Imba.Pointer.prototype.__touch={name:"touch"},Imba.Pointer.prototype.touch=function(v){return this._touch},Imba.Pointer.prototype.setTouch=function(v){return this._touch=v,this},Imba.Pointer.prototype.update=function(e){return this.setEvent(e),this.events().push(e),this.setDirty(!0),this},Imba.Pointer.prototype.process=function(){var e1=(this.phase(),this.prevEvent(),this.event());return this.dirty()?(this.setPrevEvent(e1),this.setDirty(!1),"mousedown"==e1.type?(this.setButton(e1.button),this.setTouch(new Imba.Touch(e1,this)),this.touch().mousedown(e1,e1)):"mousemove"==e1.type?this.touch()&&this.touch().mousemove(e1,e1):"mouseup"==e1.type&&(this.setButton(-1),this.touch()&&this.touch().mouseup(e1,e1),this.setTouch(null))):this.touch()&&this.touch().idle(),this},Imba.Pointer.prototype.emit=function(name,target,pars){pars&&pars.constructor===Object||(pars={});void 0!==pars.bubble?pars.bubble:!0;return!0},Imba.Pointer.prototype.cleanup=function(){return Imba.POINTERS},Imba.Pointer.prototype.x=function(){return this.event().x},Imba.Pointer.prototype.y=function(){return this.event().y},Imba.Pointer.update=function(){for(var i=0,ary=iter$(Imba.POINTERS),len=ary.length;len>i;i++)ary[i].process();return win.requestAnimationFrame(Imba.Pointer.update),this},Imba.Touch=function(e,ptr){this.setEvent(e),this.setData({}),this.setActive(!0),this._suppress=!1,this.setBubble(!1),this.setPointer(ptr),this.setUpdates(0)};var touches=[],count=0,identifiers={};Imba.Touch.count=function(){return count},Imba.Touch.lookup=function(item){return item&&(item.__touch__||identifiers[item.identifier])},Imba.Touch.release=function(item,touch){var v_,$1;v_=identifiers[item.identifier],delete identifiers[item.identifier],v_,$1=item.__touch__,delete item.__touch__,$1},Imba.Touch.ontouchstart=function(e){for(var t,i=0,ary=iter$(e.changedTouches),len=ary.length;len>i;i++)if(t=ary[i],!this.lookup(t)){var touch=identifiers[t.identifier]=new this(e);t.__touch__=touch,touches.push(touch),count++,touch.touchstart(e,t)}return this},Imba.Touch.ontouchmove=function(e){for(var touch,t,i=0,ary=iter$(e.changedTouches),len=ary.length;len>i;i++)t=ary[i],(touch=this.lookup(t))&&touch.touchmove(e,t);return this},Imba.Touch.ontouchend=function(e){for(var touch,t,i=0,ary=iter$(e.changedTouches),len=ary.length;len>i;i++)t=ary[i],(touch=this.lookup(t))&&(touch.touchend(e,t),this.release(t,touch),count--);return this},Imba.Touch.ontouchcancel=function(e){for(var touch,t,i=0,ary=iter$(e.changedTouches),len=ary.length;len>i;i++)t=ary[i],(touch=this.lookup(t))&&(touch.touchcancel(e,t),this.release(t,touch),count--);return this},Imba.Touch.prototype.__phase={name:"phase"},Imba.Touch.prototype.phase=function(v){return this._phase},Imba.Touch.prototype.setPhase=function(v){return this._phase=v,this},Imba.Touch.prototype.__active={name:"active"},Imba.Touch.prototype.active=function(v){return this._active},Imba.Touch.prototype.setActive=function(v){return this._active=v,this},Imba.Touch.prototype.__event={name:"event"},Imba.Touch.prototype.event=function(v){return this._event},Imba.Touch.prototype.setEvent=function(v){return this._event=v,this},Imba.Touch.prototype.__pointer={name:"pointer"},Imba.Touch.prototype.pointer=function(v){return this._pointer},Imba.Touch.prototype.setPointer=function(v){return this._pointer=v,this},Imba.Touch.prototype.__target={name:"target"},Imba.Touch.prototype.target=function(v){return this._target},Imba.Touch.prototype.setTarget=function(v){return this._target=v,this},Imba.Touch.prototype.__handler={name:"handler"},Imba.Touch.prototype.handler=function(v){return this._handler},Imba.Touch.prototype.setHandler=function(v){return this._handler=v,this},Imba.Touch.prototype.__updates={name:"updates"},Imba.Touch.prototype.updates=function(v){return this._updates},Imba.Touch.prototype.setUpdates=function(v){return this._updates=v,this},Imba.Touch.prototype.__suppress={name:"suppress"},Imba.Touch.prototype.suppress=function(v){return this._suppress},Imba.Touch.prototype.setSuppress=function(v){return this._suppress=v,this},Imba.Touch.prototype.__data={name:"data"},Imba.Touch.prototype.data=function(v){return this._data},Imba.Touch.prototype.setData=function(v){return this._data=v,this},Imba.Touch.prototype.__bubble={chainable:!0,name:"bubble"},Imba.Touch.prototype.bubble=function(v){return void 0!==v?(this.setBubble(v),this):this._bubble},Imba.Touch.prototype.setBubble=function(v){return this._bubble=v,this},Imba.Touch.prototype.__gestures={name:"gestures"},Imba.Touch.prototype.gestures=function(v){return this._gestures},Imba.Touch.prototype.setGestures=function(v){return this._gestures=v,this},Imba.Touch.prototype.__x0={name:"x0"},Imba.Touch.prototype.x0=function(v){return this._x0},Imba.Touch.prototype.setX0=function(v){return this._x0=v,this},Imba.Touch.prototype.__y0={name:"y0"},Imba.Touch.prototype.y0=function(v){return this._y0},Imba.Touch.prototype.setY0=function(v){return this._y0=v,this},Imba.Touch.prototype.preventDefault=function(){return this._preventDefault=!0,this.event()&&this.event().preventDefault(),this},Imba.Touch.prototype.extend=function(gesture){return this._gestures||(this._gestures=[]),this._gestures.push(gesture),this},Imba.Touch.prototype.redirect=function(target){return this._redirect=target,this},Imba.Touch.prototype.suppress=function(){return this._active=!1,this},Imba.Touch.prototype.touchstart=function(e,t){return this._event=e,this._touch=t,this._x=t.clientX,this._y=t.clientY,this.began(),e&&this._suppress&&e.preventDefault(),this},Imba.Touch.prototype.touchmove=function(e,t){return this._event=e,this._x=t.clientX,this._y=t.clientY,this.update(),e&&this._suppress&&e.preventDefault(),this},Imba.Touch.prototype.touchend=function(e,t){return this._event=e,this._x=t.clientX,this._y=t.clientY,this.ended(),e&&this._suppress&&e.preventDefault(),this},Imba.Touch.prototype.touchcancel=function(e,t){return this},Imba.Touch.prototype.mousedown=function(e,t){return this._x=t.clientX,this._y=t.clientY,this.began(),this},Imba.Touch.prototype.mousemove=function(e,t){return this._x=t.clientX,this._y=t.clientY,this._event=e,this._suppress&&e.preventDefault(),this.update(),this.move(),this},Imba.Touch.prototype.mouseup=function(e,t){return this._x=t.clientX,this._y=t.clientY,this.ended(),this},Imba.Touch.prototype.idle=function(){return this.update()},Imba.Touch.prototype.began=function(){this._x0=this._x,this._y0=this._y;var dom=(this.event(),this.event().target),node=null;for(this._sourceTarget=dom&&tag$wrap(dom);dom&&(node=tag$wrap(dom),!node||!node.ontouchstart||(this._bubble=!1,this.setTarget(node),this.target().ontouchstart(this),this._bubble));)dom=dom.parentNode;return this._updates++,this},Imba.Touch.prototype.update=function(){if(!this._active)return this;if(this._redirect&&(this._target&&this._target.ontouchcancel&&this._target.ontouchcancel(this),this.setTarget(this._redirect),this._redirect=null,this.target().ontouchstart&&this.target().ontouchstart(this)),this._updates++,this._gestures)for(var i=0,ary=iter$(this._gestures),len=ary.length;len>i;i++)ary[i].ontouchupdate(this);return this.target()&&this.target().ontouchupdate&&this.target().ontouchupdate(this),this},Imba.Touch.prototype.move=function(){if(!this._active)return this;if(this._gestures)for(var g,i=0,ary=iter$(this._gestures),len=ary.length;len>i;i++)g=ary[i],g.ontouchmove&&g.ontouchmove(this,this._event);return this.target()&&this.target().ontouchmove&&this.target().ontouchmove(this,this._event),this},Imba.Touch.prototype.ended=function(){if(!this._active)return this;if(this._updates++,this._gestures)for(var i=0,ary=iter$(this._gestures),len=ary.length;len>i;i++)ary[i].ontouchend(this);return this.target()&&this.target().ontouchend&&this.target().ontouchend(this),this._touch&&ED.trigger("tap",this.event().target),this},Imba.Touch.prototype.cancelled=function(){return this},Imba.Touch.prototype.dx=function(){return this._x-this._x0},Imba.Touch.prototype.dy=function(){return this._y-this._y0},Imba.Touch.prototype.x=function(){return this._x},Imba.Touch.prototype.y=function(){return this._y},Imba.Touch.prototype.button=function(){return this._pointer?this._pointer.button():0},Imba.Touch.prototype.sourceTarget=function(){return this._sourceTarget},Imba.TouchGesture=function(){},Imba.TouchGesture.prototype.__active={default:!1,name:"active"},Imba.TouchGesture.prototype.active=function(v){return this._active},Imba.TouchGesture.prototype.setActive=function(v){return this._active=v,this},Imba.TouchGesture.prototype._active=!1,Imba.TouchGesture.prototype.ontouchstart=function(e){return this},Imba.TouchGesture.prototype.ontouchupdate=function(e){return this},Imba.TouchGesture.prototype.ontouchend=function(e){return this},Imba.POINTER=new Imba.Pointer,Imba.POINTERS=[Imba.POINTER],Imba.KEYMAP={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"break",20:"caps",27:"esc",32:"space",35:"end",36:"home",37:"larr",38:"uarr",39:"rarr",40:"darr",45:"insert",46:"delete",107:"plus",106:"mult",91:"meta"},Imba.CHARMAP={"%":"modulo","*":"multiply","+":"add","-":"sub","/":"divide",".":"dot"},Imba.Event=function(e){this.setEvent(e),this.setBubble(!0)},Imba.Event.prototype.__event={name:"event"},Imba.Event.prototype.event=function(v){return this._event},Imba.Event.prototype.setEvent=function(v){return this._event=v,this},Imba.Event.prototype.__target={name:"target"},Imba.Event.prototype.target=function(v){return this._target},Imba.Event.prototype.setTarget=function(v){return this._target=v,this},Imba.Event.prototype.__prefix={name:"prefix"},Imba.Event.prototype.prefix=function(v){return this._prefix},Imba.Event.prototype.setPrefix=function(v){return this._prefix=v,this},Imba.Event.prototype.__data={name:"data"},Imba.Event.prototype.data=function(v){return this._data},Imba.Event.prototype.setData=function(v){return this._data=v,this},Imba.Event.prototype.__source={name:"source"},Imba.Event.prototype.source=function(v){return this._source},Imba.Event.prototype.setSource=function(v){return this._source=v,this},Imba.Event.prototype.__bubble={name:"bubble"},Imba.Event.prototype.bubble=function(v){return this._bubble},Imba.Event.prototype.setBubble=function(v){return this._bubble=v,this},Imba.Event.wrap=function(e){return new this(e)},Imba.Event.prototype.name=function(){return this.event().type.toLowerCase().replace(/\:/g,"")},Imba.Event.prototype.bubble=function(v){return void 0!=v?(this.setBubble(v),this):this._bubble},Imba.Event.prototype.halt=function(){return this.setBubble(!1),this},Imba.Event.prototype.cancel=function(){return this.event().preventDefault&&this.event().preventDefault(),this},Imba.Event.prototype.target=function(){return tag$wrap(this.event()._target||this.event().target)},Imba.Event.prototype.redirect=function(node){return this._redirect=node,this},Imba.Event.prototype.keychar=function(){if(this.event()instanceof TextEvent)return this.event().data;if(this.event()instanceof KeyboardEvent){var ki=this.event().keyIdentifier,sym=Imba.KEYMAP[this.event().keyCode];return sym||"U+"!=ki.substr(0,2)||(sym=String.fromCharCode(parseInt(ki.substr(2),16))),sym}return null},Imba.Event.prototype.keycombo=function(){var sym;if(sym=this.keychar()){sym=Imba.CHARMAP[sym]||sym;var combo=[];return this.event().ctrlKey&&combo.push("ctrl"),this.event().shiftKey&&combo.push("shift"),this.event().altKey&&combo.push("alt"),this.event().metaKey&&combo.push("cmd"),combo.push(sym),combo.join("_").toLowerCase()}},Imba.Event.prototype.process=function(){for(var node,$1,meth="on"+(this._prefix||"")+this.name(),args=null,domtarget=this.event()._target||this.event().target,domnode=domtarget._responder||domtarget;domnode;){if(this._redirect=null,node=tag$wrap(domnode)){if("string"==typeof node[$1=meth]||node[$1]instanceof String){meth=node[meth];continue}if(node[meth]instanceof Array){args=node[meth].concat(node),meth=args.shift();continue}if(node[meth]instanceof Function){args?node[meth].apply(node,args):node[meth](this,this.data())}}if(!this.bubble()||!(domnode=this._redirect||(node?node.parent():domnode.parentNode)))break}return this},Imba.Event.prototype.x=function(){return this.event().x},Imba.Event.prototype.y=function(){return this.event().y},Imba.Event.prototype.which=function(){return this.event().which},Imba.EventManager=function(node,pars){var self=this;pars&&pars.constructor===Object||(pars={});var events=void 0!==pars.events?pars.events:[];self.setRoot(node),self.setListeners([]),self.setDelegators({}),self.setDelegator(function(e){return self.delegate(e),!0});for(var i=0,ary=iter$(events),len=ary.length;len>i;i++)self.register(ary[i])},Imba.EventManager.prototype.__root={name:"root"},Imba.EventManager.prototype.root=function(v){return this._root},Imba.EventManager.prototype.setRoot=function(v){return this._root=v,this},Imba.EventManager.prototype.__enabled={default:!1,watch:"enabledDidSet",name:"enabled"},Imba.EventManager.prototype.enabled=function(v){return this._enabled},Imba.EventManager.prototype.setEnabled=function(v){var a=this.enabled();return v!=a&&(v=this._enabled=v),v!=a&&this.enabledDidSet&&this.enabledDidSet(v,a,this.__enabled),this},Imba.EventManager.prototype._enabled=!1,Imba.EventManager.prototype.__listeners={name:"listeners"},Imba.EventManager.prototype.listeners=function(v){return this._listeners},Imba.EventManager.prototype.setListeners=function(v){return this._listeners=v,this},Imba.EventManager.prototype.__delegators={name:"delegators"},Imba.EventManager.prototype.delegators=function(v){return this._delegators},Imba.EventManager.prototype.setDelegators=function(v){return this._delegators=v,this},Imba.EventManager.prototype.__delegator={name:"delegator"},Imba.EventManager.prototype.delegator=function(v){return this._delegator},Imba.EventManager.prototype.setDelegator=function(v){return this._delegator=v,this},Imba.EventManager.prototype.enabledDidSet=function(bool){return bool?this.onenable():this.ondisable(),this},Imba.EventManager.prototype.register=function(name,handler){if(void 0===handler&&(handler=!0),name instanceof Array){for(var i=0,ary=iter$(name),len=ary.length;len>i;i++)this.register(ary[i],handler);return this}if(this.delegators()[name])return this;var fn=this.delegators()[name]=handler instanceof Function?handler:this.delegator();return this.enabled()?this.root().addEventListener(name,fn,!0):void 0},Imba.EventManager.prototype.listen=function(name,handler,capture){return void 0===capture&&(capture=!0),this.listeners().push([name,handler,capture]),this.enabled()&&this.root().addEventListener(name,handler,capture),this},Imba.EventManager.prototype.delegate=function(e){var event=Imba.Event.wrap(e);return event.process(),this},Imba.EventManager.prototype.create=function(type,target,pars){pars&&pars.constructor===Object||(pars={});var data=void 0!==pars.data?pars.data:null,source=void 0!==pars.source?pars.source:null,event=Imba.Event.wrap({type:type,target:target});return data&&(event.setData(data),data),source&&(event.setSource(source),source),event},Imba.EventManager.prototype.trigger=function(type,target,pars){pars&&pars.constructor===Object||(pars={});var data=void 0!==pars.data?pars.data:null,source=void 0!==pars.source?pars.source:null,event=Imba.Event.wrap({type:type,target:target});return data&&(event.setData(data),data),source&&(event.setSource(source),source),event.process()},Imba.EventManager.prototype.emit=function(obj,event,data,pars){pars&&pars.constructor===Object||(pars={});for(var node,ns=(void 0!==pars.dom?pars.dom:!0,void 0!==pars.ns?pars.ns:"object"),fn="on"+ns,nodes=DOC.querySelectorAll("."+obj.uid()),i=0,ary=iter$(nodes),len=ary.length;len>i;i++)node=ary[i],node._tag&&node._tag[fn]&&node._tag[fn](event,data);return this},Imba.EventManager.prototype.onenable=function(){for(var o=this.delegators(),i=0,keys=Object.keys(o),l=keys.length;l>i;i++)this.root().addEventListener(keys[i],o[keys[i]],!0);for(var item,j=0,ary=iter$(this.listeners()),len=ary.length;len>j;j++)item=ary[j],this.root().addEventListener(item[0],item[1],item[2]);return this},Imba.EventManager.prototype.ondisable=function(){for(var o=this.delegators(),i=0,keys=Object.keys(o),l=keys.length;l>i;i++)this.root().removeEventListener(keys[i],o[keys[i]],!0);for(var item,j=0,ary=iter$(this.listeners()),len=ary.length;len>j;j++)item=ary[j],this.root().removeEventListener(item[0],item[1],item[2]);return this},ED=Imba.Events=new Imba.EventManager(document,{events:["keydown","keyup","keypress","textInput","input","change","submit","focusin","focusout","blur","contextmenu","mousedown","mouseup","mousewheel","dblclick"]}),hasTouchEvents?(ED.listen("touchstart",function(e){return Imba.Touch.ontouchstart(e)}),ED.listen("touchmove",function(e){return Imba.Touch.ontouchmove(e)}),ED.listen("touchend",function(e){return Imba.Touch.ontouchend(e)}),ED.listen("touchcancel",function(e){return Imba.Touch.ontouchcancel(e)})):(ED.listen("click",function(e){return ED.trigger("tap",e.target)}),ED.listen("mousedown",function(e){return Imba.POINTER?Imba.POINTER.update(e).process():void 0}),ED.listen("mousemove",function(e){return Imba.POINTER?Imba.POINTER.update(e).process():void 0}),ED.listen("mouseup",function(e){return Imba.POINTER?Imba.POINTER.update(e).process():void 0})),Imba.Events.setEnabled(!0)}()},{}],4:[function(require,module,exports){!function(){function idx$(a,b){return b&&b.indexOf?b.indexOf(a):[].indexOf.call(a,b)}function subclass$(obj,sup){for(var k in sup)sup.hasOwnProperty(k)&&(obj[k]=sup[k]);obj.prototype=Object.create(sup.prototype),obj.__super__=obj.prototype.__super__=sup.prototype,obj.prototype.initialize=obj.prototype.constructor=obj}function iter$(a){return a?a.toArray?a.toArray():a:[]}function ElementTag(dom){this.setDom(dom)}function HTMLElementTag(){ElementTag.apply(this,arguments)}function extender(obj,sup){for(var i=0,keys=Object.keys(sup),l=keys.length;l>i;i++)obj[keys[i]]=sup[keys[i]];return obj.prototype=Object.create(sup.prototype),obj.__super__=obj.prototype.__super__=sup.prototype,obj.prototype.initialize=obj.prototype.constructor=obj,obj}var svgSupport="undefined"!=typeof SVGElement;Imba.document=function(){return window.document},Imba.static=function(items,nr){return items.static=nr,items},ElementTag.prototype.__object={name:"object"},ElementTag.prototype.object=function(v){return this._object},ElementTag.prototype.setObject=function(v){return this._object=v,this},ElementTag.prototype.dom=function(){return this._dom},ElementTag.prototype.setDom=function(dom){return dom._tag=this,this._dom=dom,this},ElementTag.prototype.setRef=function(ref){return this.flag(this._ref=ref),this},ElementTag.prototype.setHandler=function(name,v){return this["on"+name]=v,this},ElementTag.prototype.setAttribute=function(key,new$){var old=this.dom().getAttribute(key);return old==new$?new$:null!=new$&&new$!==!1?this.dom().setAttribute(key,new$):this.dom().removeAttribute(key)},ElementTag.prototype.removeAttribute=function(key){return this.dom().removeAttribute(key)},ElementTag.prototype.getAttribute=function(key){return this.dom().getAttribute(key)},ElementTag.prototype.object=function(v){return arguments.length?(this.setObject(v),v,this):this._object},ElementTag.prototype.setContent=function(content){return this.setChildren(content),this},ElementTag.prototype.setChildren=function(nodes){return this._empty?this.append(nodes):this.empty().append(nodes),this._children=null,this},ElementTag.prototype.text=function(v){return arguments.length?(this.setText(v),v,this):this._dom.textContent},ElementTag.prototype.setText=function(txt){return this._empty=!1,this._dom.textContent=null==txt?txt="":txt,this},ElementTag.prototype.empty=function(){for(;this._dom.firstChild;)this._dom.removeChild(this._dom.firstChild);return this._children=null,this._empty=!0,this},ElementTag.prototype.remove=function(node){var par=this.dom(),el=node&&node.dom();return el&&el.parentNode==par&&par.removeChild(el),this},ElementTag.prototype.parent=function(){return tag$wrap(this.dom().parentNode)},ElementTag.prototype.log=function(){for(var $0=arguments,i=$0.length,args=new Array(i>0?i:0);i>0;)args[i-1]=$0[--i];return args.unshift(console),Function.prototype.call.apply(console.log,args),this},ElementTag.prototype.emit=function(name,pars){pars&&pars.constructor===Object||(pars={});var data=void 0!==pars.data?pars.data:null,bubble=void 0!==pars.bubble?pars.bubble:!0;return Imba.Events.trigger(name,this,{data:data,bubble:bubble}),this},ElementTag.prototype.css=function(key,val){if(key instanceof Object)for(var i=0,keys=Object.keys(key),l=keys.length;l>i;i++)this.css(keys[i],key[keys[i]]);else if(null==val)this.dom().style.removeProperty(key);else{if(void 0==val)return this.dom().style[key];("number"==typeof val||val instanceof Number)&&key.match(/width|height|left|right|top|bottom/)&&(val+="px"),this.dom().style[key]=val}return this},ElementTag.prototype.find=function(sel){return new Imba.Selector(sel,this)},ElementTag.prototype.first=function(sel){return sel?this.find(sel).first():tag$wrap(this.dom().firstElementChild)},ElementTag.prototype.last=function(sel){return sel?this.find(sel).last():tag$wrap(this.dom().lastElementChild)},ElementTag.prototype.child=function(i){return tag$wrap(this.dom().children[i||0])},ElementTag.prototype.children=function(sel){var nodes=new Imba.Selector(null,this,this._dom.children);return sel?nodes.filter(sel):nodes},ElementTag.prototype.orphanize=function(){var par;return(par=this.dom().parentNode)&&par.removeChild(this._dom),this},ElementTag.prototype.matches=function(sel){var fn;return sel instanceof Function?sel(this):(sel.query&&(sel=sel.query()),(fn=this._dom.webkitMatchesSelector||this._dom.matches)?fn.call(this._dom,sel):void 0)},ElementTag.prototype.closest=function(sel){if(!sel)return this.parent();var node=this;for(sel.query&&(sel=sel.query());node;){if(node.matches(sel))return node;node=node.parent()}return null},ElementTag.prototype.path=function(sel){var node=this,nodes=[];for(sel&&sel.query&&(sel=sel.query());node;)(!sel||node.matches(sel))&&nodes.push(node),node=node.parent();return nodes},ElementTag.prototype.parents=function(sel){var par=this.parent();return par?par.path(sel):[]},ElementTag.prototype.up=function(sel){return sel?this.parent()&&this.parent().closest(sel):this.parent()},ElementTag.prototype.siblings=function(sel){var par,self=this;if(!(par=this.parent()))return[];var ary=this.dom().parentNode.children,nodes=new Imba.Selector(null,this,ary);return nodes.filter(function(n){return n!=self&&(!sel||n.matches(sel))})},ElementTag.prototype.next=function(sel){if(sel){for(var el=this;el=el.next();)if(el.matches(sel))return el;return null}return tag$wrap(this.dom().nextElementSibling)},ElementTag.prototype.prev=function(sel){if(sel){for(var el=this;el=el.prev();)if(el.matches(sel))return el;return null}return tag$wrap(this.dom().previousElementSibling)},ElementTag.prototype.contains=function(node){return this.dom().contains(node&&node._dom||node)},ElementTag.prototype.index=function(){for(var i=0,el=this.dom();el.previousSibling;)el=el.previousSibling,i++;return i},ElementTag.prototype.insert=function(node,pars){pars&&pars.constructor===Object||(pars={});var before=void 0!==pars.before?pars.before:null,after=void 0!==pars.after?pars.after:null;return after&&(before=after.next()),node instanceof Array&&(node=t$("fragment").setContent([node]).end()),before?this.dom().insertBefore(node.dom(),before.dom()):this.append(node),this},ElementTag.prototype.bind=function(obj){return this.setObject(obj),this},ElementTag.prototype.render=function(){return this},ElementTag.prototype.build=function(){return this.render(),this},ElementTag.prototype.commit=function(){return this},ElementTag.prototype.end=function(){return this._built?this.commit():(this._built=!0,this.build()),this},ElementTag.prototype.synced=function(){return this},ElementTag.prototype.awaken=function(){return this},ElementTag.prototype.focus=function(){return this.dom().focus(),this},ElementTag.prototype.blur=function(){return this.dom().blur(),this},ElementTag.prototype.template=function(){return null},ElementTag.prototype.prepend=function(item){return this.insert(item,{before:this.first()})},ElementTag.prototype.append=function(item){if(!item)return this;if(item instanceof Array)for(var member,i=0,ary=iter$(item),len=ary.length;len>i;i++)member=ary[i],member&&this.append(member);else if("string"==typeof item||item instanceof String||"number"==typeof item||item instanceof Number){var node=Imba.document().createTextNode(item);this._dom.appendChild(node),this._empty&&(this._empty=!1)}else this._dom.appendChild(item._dom||item),this._empty&&(this._empty=!1);return this},ElementTag.prototype.insertBefore=function(node,rel){return("string"==typeof node||node instanceof String)&&(node=Imba.document().createTextNode(node)),node&&rel&&this.dom().insertBefore(node._dom||node,rel._dom||rel),this},ElementTag.prototype.appendChild=function(node){return("string"==typeof node||node instanceof String)&&(node=Imba.document().createTextNode(node)),node&&this.dom().appendChild(node._dom||node),this},ElementTag.prototype.removeChild=function(node){return node&&this.dom().removeChild(node._dom||node),this},ElementTag.prototype.toString=function(){return this._dom.toString()},ElementTag.prototype.classes=function(){return this._dom.classList},ElementTag.prototype.flags=function(){return this._dom.classList},ElementTag.prototype.flag=function(ref,toggle){return 2==arguments.length?toggle?this.flags().add(ref):this.flags().remove(ref):this.flags().add(ref),this},ElementTag.prototype.unflag=function(ref){return this.flags().remove(ref),this},ElementTag.prototype.hasFlag=function(ref){return this.flags().contains(ref)},ElementTag.flag=function(flag){return this.dom().classList.add(flag),this},ElementTag.unflag=function(flag){return this.dom().classList.remove(flag),this},ElementTag.prototype.initialize=ElementTag,subclass$(HTMLElementTag,ElementTag),HTMLElementTag.dom=function(){if(this._dom)return this._dom;var dom,sup=this.__super__.constructor;if(this._isNative)dom=Imba.document().createElement(this._nodeType);else if(this._nodeType!=sup._nodeType){console.log("custom dom type(!)"),dom=Imba.document().createElement(this._nodeType);for(var atr,i=0,ary=iter$(sup.dom()),len=ary.length;len>i;i++)atr=ary[i],dom.setAttribute(atr.name,atr.value)}else dom=sup.dom().cloneNode(!1);if(this._domFlags)for(var i=0,ary=iter$(this._domFlags),len=ary.length;len>i;i++)dom.classList.add(ary[i]);return this._dom=dom},HTMLElementTag.createNode=function(flags,id){var proto=this._dom||this.dom(),dom=proto.cloneNode(!1);if(id&&(dom.id=id),flags){this.p("SHOULD NEVER GET HERE?!");var nc=dom.className;dom.className=nc&&flags?nc+" "+flags:nc||flags}return dom},HTML_TAGS="a abbr address area article aside audio b base bdi bdo big blockquote body br button canvas caption cite code col colgroup data datalist dd del details dfn div dl dt em embed fieldset figcaption figure footer form h1 h2 h3 h4 h5 h6 head header hr html i iframe img input ins kbd keygen label legend li link main map mark menu menuitem meta meter nav noscript object ol optgroup option output p param pre progress q rp rt ruby s samp script section select small source span strong style sub summary sup table tbody td textarea tfoot th thead time title tr track u ul var video wbr".split(" "),HTML_TAGS_UNSAFE="article aside header section".split(" "),SVG_TAGS="circle defs ellipse g line linearGradient mask path pattern polygon polyline radialGradient rect stop svg text tspan".split(" "),IMBA_TAGS={element:ElementTag,htmlelement:HTMLElementTag},Imba.SINGLETONS={},Imba.TAGS=IMBA_TAGS,Imba.defineTag=function(name,supr,body){void 0==body&&"function"==typeof supr&&(body=supr,supr="");var m=name.split("$"),name=m[0],ns=m[1];supr||(supr=idx$(name,HTML_TAGS)>=0?"htmlelement":"div");
var suprklass=IMBA_TAGS[supr],fun=new Function("return function "+name.replace(/[\s\-\:]/g,"_")+"(dom){ this.setDom(dom); }"),Tag=fun(),klass=Tag;if(extender(klass,suprklass),klass._nodeType=suprklass._nodeType||name,klass._name=name,klass._ns=ns,klass._nodeType!=name){klass._nodeFlag="_"+name.replace(/_/g,"-");var nc=suprklass._nodeClass;nc=nc?nc.split(/\s+/g):[];var c=null;ns&&-1==idx$(c,nc)&&nc.push(c=""+ns+"_"),idx$(c,nc)>=0||nc.push(c=klass._nodeFlag),klass._nodeClass=nc.join(" "),klass._domFlags=nc,klass._isNative=!1}else klass._isNative=!0;return klass._dom=null,klass.prototype._nodeType=klass._nodeType,klass.prototype._dom=null,klass.prototype._built=!1,klass.prototype._empty=!0,ns||(IMBA_TAGS[name]=klass),IMBA_TAGS[""+name+"$"+(ns||"html")]=klass,body&&body.call(klass,klass,klass.prototype),klass},Imba.defineSingletonTag=function(id,supr,body){void 0==body&&"function"==typeof supr&&(body=supr,supr="");var superklass=Imba.TAGS[supr||"div"],fun=new Function("return function "+id.replace(/[\s\-\:]/g,"_")+"(dom){ this.setDom(dom); }"),singleton=fun(),klass=extender(singleton,superklass);return klass._id=id,klass._ns=superklass._ns,klass._nodeType=superklass._nodeType,klass._nodeClass=superklass._nodeClass,klass._domFlags=superklass._domFlags,klass._isNative=!1,klass._dom=null,klass._instance=null,klass.prototype._dom=null,klass.prototype._built=!1,klass.prototype._empty=!0,Imba.SINGLETONS[id]=klass,body&&body.call(klass,klass,klass.prototype),klass},Imba.extendTag=function(name,body){var klass="string"==typeof name||name instanceof String?IMBA_TAGS[name]:name;return body&&body&&body.call(klass,klass,klass.prototype),klass},Imba.tag=function(name){var typ=IMBA_TAGS[name];return new typ(typ.createNode())},Imba.tagWithId=function(name,id){var typ=IMBA_TAGS[name],dom=typ.createNode();return dom.id=id,new typ(dom)},Imba.getTagSingleton=function(id){var type,node,dom;return(type=Imba.SINGLETONS[id])?type&&type.Instance?type.Instance:(dom=Imba.document().getElementById(id))?(node=type.Instance=new type(dom),node.awaken(dom),node):(dom=type.createNode(),dom.id=id,node=type.Instance=new type(dom),node.end().awaken(dom),node):(dom=Imba.document().getElementById(id))?Imba.getTagForDom(dom):void 0},Imba.getTagForDom=function(dom){var m;if(!dom)return null;if(dom._dom)return dom;if(dom._tag)return dom._tag;if(!dom.nodeName)return null;var ns=null,id=dom.id,type=dom.nodeName.toLowerCase(),cls=dom.className;if(id&&Imba.SINGLETONS[id])return Imba.getTagSingleton(id);svgSupport&&dom instanceof SVGElement&&(ns="svg",cls=dom.className.baseVal),cls&&((m=cls.match(/\b_([a-z\-]+)\b(?!\s*_[a-z\-]+)/))&&(type=m[1].replace(/-/g,"_")),(m=cls.match(/\b([a-z]+)_\b/))&&(ns=m[1]));var spawner=IMBA_TAGS[type];return spawner?new spawner(dom).awaken(dom):null},t$=Imba.tag,tc$=Imba.tagWithFlags,ti$=Imba.tagWithId,tic$=Imba.tagWithIdAndFlags,id$=Imba.getTagSingleton,tag$wrap=Imba.getTagForDom,Imba.extendTag("htmlelement",function(tag){tag.prototype.__id={name:"id"},tag.prototype.id=function(v){return this.getAttribute("id")},tag.prototype.setId=function(v){return this.setAttribute("id",v),this},tag.prototype.__tabindex={name:"tabindex"},tag.prototype.tabindex=function(v){return this.getAttribute("tabindex")},tag.prototype.setTabindex=function(v){return this.setAttribute("tabindex",v),this},tag.prototype.__title={name:"title"},tag.prototype.title=function(v){return this.getAttribute("title")},tag.prototype.setTitle=function(v){return this.setAttribute("title",v),this},tag.prototype.__role={name:"role"},tag.prototype.role=function(v){return this.getAttribute("role")},tag.prototype.setRole=function(v){return this.setAttribute("role",v),this}}),Imba.defineTag("fragment","htmlelement",function(tag){tag.createNode=function(){return Imba.document().createDocumentFragment()}}),Imba.defineTag("a",function(tag){tag.prototype.__href={dom:!0,name:"href"},tag.prototype.href=function(v){return this.getAttribute("href")},tag.prototype.setHref=function(v){return this.setAttribute("href",v),this}}),Imba.defineTag("abbr"),Imba.defineTag("address"),Imba.defineTag("area"),Imba.defineTag("article"),Imba.defineTag("aside"),Imba.defineTag("audio"),Imba.defineTag("b"),Imba.defineTag("base"),Imba.defineTag("bdi"),Imba.defineTag("bdo"),Imba.defineTag("big"),Imba.defineTag("blockquote"),Imba.defineTag("body"),Imba.defineTag("br"),Imba.defineTag("button",function(tag){tag.prototype.__autofocus={name:"autofocus"},tag.prototype.autofocus=function(v){return this.getAttribute("autofocus")},tag.prototype.setAutofocus=function(v){return this.setAttribute("autofocus",v),this},tag.prototype.__type={dom:!0,name:"type"},tag.prototype.type=function(v){return this.getAttribute("type")},tag.prototype.setType=function(v){return this.setAttribute("type",v),this},tag.prototype.__disabled={dom:!0,name:"disabled"},tag.prototype.disabled=function(v){return this.getAttribute("disabled")},tag.prototype.setDisabled=function(v){return this.setAttribute("disabled",v),this}}),Imba.defineTag("canvas"),Imba.defineTag("caption"),Imba.defineTag("cite"),Imba.defineTag("code"),Imba.defineTag("col"),Imba.defineTag("colgroup"),Imba.defineTag("data"),Imba.defineTag("datalist"),Imba.defineTag("dd"),Imba.defineTag("del"),Imba.defineTag("details"),Imba.defineTag("dfn"),Imba.defineTag("div"),Imba.defineTag("dl"),Imba.defineTag("dt"),Imba.defineTag("em"),Imba.defineTag("embed"),Imba.defineTag("fieldset"),Imba.defineTag("figcaption"),Imba.defineTag("figure"),Imba.defineTag("footer"),Imba.defineTag("form",function(tag){tag.prototype.__method={dom:!0,name:"method"},tag.prototype.method=function(v){return this.getAttribute("method")},tag.prototype.setMethod=function(v){return this.setAttribute("method",v),this},tag.prototype.__action={dom:!0,name:"action"},tag.prototype.action=function(v){return this.getAttribute("action")},tag.prototype.setAction=function(v){return this.setAttribute("action",v),this}}),Imba.defineTag("h1"),Imba.defineTag("h2"),Imba.defineTag("h3"),Imba.defineTag("h4"),Imba.defineTag("h5"),Imba.defineTag("h6"),Imba.defineTag("head"),Imba.defineTag("header"),Imba.defineTag("hr"),Imba.defineTag("html"),Imba.defineTag("i"),Imba.defineTag("iframe",function(tag){tag.prototype.__src={name:"src"},tag.prototype.src=function(v){return this.getAttribute("src")},tag.prototype.setSrc=function(v){return this.setAttribute("src",v),this}}),Imba.defineTag("img",function(tag){tag.prototype.__src={name:"src"},tag.prototype.src=function(v){return this.getAttribute("src")},tag.prototype.setSrc=function(v){return this.setAttribute("src",v),this}}),Imba.defineTag("input",function(tag){tag.prototype.__name={dom:!0,name:"name"},tag.prototype.name=function(v){return this.getAttribute("name")},tag.prototype.setName=function(v){return this.setAttribute("name",v),this},tag.prototype.__type={dom:!0,name:"type"},tag.prototype.type=function(v){return this.getAttribute("type")},tag.prototype.setType=function(v){return this.setAttribute("type",v),this},tag.prototype.__value={dom:!0,name:"value"},tag.prototype.value=function(v){return this.getAttribute("value")},tag.prototype.setValue=function(v){return this.setAttribute("value",v),this},tag.prototype.__required={dom:!0,name:"required"},tag.prototype.required=function(v){return this.getAttribute("required")},tag.prototype.setRequired=function(v){return this.setAttribute("required",v),this},tag.prototype.__disabled={dom:!0,name:"disabled"},tag.prototype.disabled=function(v){return this.getAttribute("disabled")},tag.prototype.setDisabled=function(v){return this.setAttribute("disabled",v),this},tag.prototype.__placeholder={dom:!0,name:"placeholder"},tag.prototype.placeholder=function(v){return this.getAttribute("placeholder")},tag.prototype.setPlaceholder=function(v){return this.setAttribute("placeholder",v),this},tag.prototype.__autofocus={name:"autofocus"},tag.prototype.autofocus=function(v){return this.getAttribute("autofocus")},tag.prototype.setAutofocus=function(v){return this.setAttribute("autofocus",v),this},tag.prototype.value=function(){return this.dom().value},tag.prototype.setValue=function(v){return this.dom().value=v,this},tag.prototype.checked=function(){return this.dom().checked},tag.prototype.setChecked=function(bool){return this.dom().checked=bool,this}}),Imba.defineTag("ins"),Imba.defineTag("kbd"),Imba.defineTag("keygen"),Imba.defineTag("label"),Imba.defineTag("legend"),Imba.defineTag("li"),Imba.defineTag("link",function(tag){tag.prototype.__rel={dom:!0,name:"rel"},tag.prototype.rel=function(v){return this.getAttribute("rel")},tag.prototype.setRel=function(v){return this.setAttribute("rel",v),this},tag.prototype.__type={dom:!0,name:"type"},tag.prototype.type=function(v){return this.getAttribute("type")},tag.prototype.setType=function(v){return this.setAttribute("type",v),this},tag.prototype.__href={dom:!0,name:"href"},tag.prototype.href=function(v){return this.getAttribute("href")},tag.prototype.setHref=function(v){return this.setAttribute("href",v),this},tag.prototype.__media={dom:!0,name:"media"},tag.prototype.media=function(v){return this.getAttribute("media")},tag.prototype.setMedia=function(v){return this.setAttribute("media",v),this}}),Imba.defineTag("main"),Imba.defineTag("map"),Imba.defineTag("mark"),Imba.defineTag("menu"),Imba.defineTag("menuitem"),Imba.defineTag("meta",function(tag){tag.prototype.__name={dom:!0,name:"name"},tag.prototype.name=function(v){return this.getAttribute("name")},tag.prototype.setName=function(v){return this.setAttribute("name",v),this},tag.prototype.__content={dom:!0,name:"content"},tag.prototype.content=function(v){return this.getAttribute("content")},tag.prototype.setContent=function(v){return this.setAttribute("content",v),this},tag.prototype.__charset={dom:!0,name:"charset"},tag.prototype.charset=function(v){return this.getAttribute("charset")},tag.prototype.setCharset=function(v){return this.setAttribute("charset",v),this}}),Imba.defineTag("meter"),Imba.defineTag("nav"),Imba.defineTag("noscript"),Imba.defineTag("object"),Imba.defineTag("ol"),Imba.defineTag("optgroup"),Imba.defineTag("option",function(tag){tag.prototype.__value={dom:!0,name:"value"},tag.prototype.value=function(v){return this.getAttribute("value")},tag.prototype.setValue=function(v){return this.setAttribute("value",v),this}}),Imba.defineTag("output"),Imba.defineTag("p"),Imba.defineTag("param"),Imba.defineTag("pre"),Imba.defineTag("progress"),Imba.defineTag("q"),Imba.defineTag("rp"),Imba.defineTag("rt"),Imba.defineTag("ruby"),Imba.defineTag("s"),Imba.defineTag("samp"),Imba.defineTag("script",function(tag){tag.prototype.__src={dom:!0,name:"src"},tag.prototype.src=function(v){return this.getAttribute("src")},tag.prototype.setSrc=function(v){return this.setAttribute("src",v),this},tag.prototype.__type={dom:!0,name:"type"},tag.prototype.type=function(v){return this.getAttribute("type")},tag.prototype.setType=function(v){return this.setAttribute("type",v),this}}),Imba.defineTag("section"),Imba.defineTag("select",function(tag){tag.prototype.__multiple={dom:!0,name:"multiple"},tag.prototype.multiple=function(v){return this.getAttribute("multiple")},tag.prototype.setMultiple=function(v){return this.setAttribute("multiple",v),this},tag.prototype.value=function(){return this.dom().value},tag.prototype.setValue=function(v){return this.dom().value=v,this}}),Imba.defineTag("small"),Imba.defineTag("source"),Imba.defineTag("span"),Imba.defineTag("strong"),Imba.defineTag("style"),Imba.defineTag("sub"),Imba.defineTag("summary"),Imba.defineTag("sup"),Imba.defineTag("table"),Imba.defineTag("tbody"),Imba.defineTag("td"),Imba.defineTag("textarea",function(tag){tag.prototype.__name={dom:!0,name:"name"},tag.prototype.name=function(v){return this.getAttribute("name")},tag.prototype.setName=function(v){return this.setAttribute("name",v),this},tag.prototype.__disabled={dom:!0,name:"disabled"},tag.prototype.disabled=function(v){return this.getAttribute("disabled")},tag.prototype.setDisabled=function(v){return this.setAttribute("disabled",v),this},tag.prototype.__required={dom:!0,name:"required"},tag.prototype.required=function(v){return this.getAttribute("required")},tag.prototype.setRequired=function(v){return this.setAttribute("required",v),this},tag.prototype.__placeholder={dom:!0,name:"placeholder"},tag.prototype.placeholder=function(v){return this.getAttribute("placeholder")},tag.prototype.setPlaceholder=function(v){return this.setAttribute("placeholder",v),this},tag.prototype.__value={dom:!0,name:"value"},tag.prototype.value=function(v){return this.getAttribute("value")},tag.prototype.setValue=function(v){return this.setAttribute("value",v),this},tag.prototype.__rows={dom:!0,name:"rows"},tag.prototype.rows=function(v){return this.getAttribute("rows")},tag.prototype.setRows=function(v){return this.setAttribute("rows",v),this},tag.prototype.__cols={dom:!0,name:"cols"},tag.prototype.cols=function(v){return this.getAttribute("cols")},tag.prototype.setCols=function(v){return this.setAttribute("cols",v),this},tag.prototype.__autofocus={name:"autofocus"},tag.prototype.autofocus=function(v){return this.getAttribute("autofocus")},tag.prototype.setAutofocus=function(v){return this.setAttribute("autofocus",v),this},tag.prototype.value=function(){return this.dom().value},tag.prototype.setValue=function(v){return this.dom().value=v,this}}),Imba.defineTag("tfoot"),Imba.defineTag("th"),Imba.defineTag("thead"),Imba.defineTag("time"),Imba.defineTag("title"),Imba.defineTag("tr"),Imba.defineTag("track"),Imba.defineTag("u"),Imba.defineTag("ul"),Imba.defineTag("video"),Imba.defineTag("wbr")}()},{}],5:[function(require,module,exports){!function(){function iter$(a){return a?a.toArray?a.toArray():a:[]}function removeNested(root,node,caret){if(node instanceof Array)for(var i=0,ary=iter$(node),len=ary.length;len>i;i++)removeNested(root,ary[i],caret);else"number"==typeof node||node instanceof Number||node&&root.removeChild(node);return caret}function appendNested(root,node){if(node instanceof Array)for(var i=0,ary=iter$(node),len=ary.length;len>i;i++)appendNested(root,ary[i]);else"number"==typeof node||node instanceof Number||("string"==typeof node||node instanceof String?root.appendChild(Imba.document().createTextNode(node)):node&&root.appendChild(node))}function insertNestedBefore(root,node,before){if(("string"==typeof node||node instanceof String)&&(node=Imba.document().createTextNode(node)),node instanceof Array)for(var i=0,ary=iter$(node),len=ary.length;len>i;i++)insertNestedBefore(root,ary[i],before);else"number"==typeof node||node instanceof Number||node&&root.insertBefore(node,before);return before}function insertNestedAfter(root,node,after){var before=after?after.nextSibling:root._dom.firstChild;return before?(insertNestedBefore(root,node,before),before.previousSibling):(appendNested(root,node),root._dom.lastChild)}function reconcileCollectionChanges(root,new$,old,caret){for(var node,newLen=new$.length,lastNew=(old.length,new$[newLen-1]),newPosition=[],prevChain=[],lengthChain=[],maxChainLength=0,maxChainEnd=0,idx=0,ary=iter$(old),len=ary.length;len>idx;idx++){node=ary[idx];var newPos=new$.indexOf(node);if(newPosition.push(newPos),-1!=newPos){for(var prevIdx=newPosition.length-2;prevIdx>=0;)if(-1==newPosition[prevIdx])prevIdx--;else{if(newPos>newPosition[prevIdx])break;prevIdx=prevChain[prevIdx]}prevChain.push(prevIdx);var currLength=-1==prevIdx?0:lengthChain[prevIdx]+1;currLength>maxChainLength&&(maxChainLength=currLength,maxChainEnd=idx),lengthChain.push(currLength)}else root.removeChild(node),prevChain.push(-1),lengthChain.push(-1)}for(var stickyNodes=[],cursor=newPosition.length-1;cursor>=0;)-1==newPosition[cursor]||cursor==maxChainEnd&&(stickyNodes[newPosition[cursor]]=!0,maxChainEnd=prevChain[maxChainEnd]),cursor-=1;for(var idx1=0,ary=iter$(new$),len=ary.length;len>idx1;idx1++)if(!stickyNodes[idx1]){var after=new$[idx1-1];insertNestedAfter(root,ary[idx1],after&&after._dom||caret)}return lastNew&&lastNew._dom||caret}function reconcileCollection(root,new$,old,caret){var k=new$.length,i=k,last=new$[k-1];if(k==old.length&&new$[0]===old[0])for(;i--&&new$[i]===old[i];);return-1==i?last&&last._dom||caret:reconcileCollectionChanges(root,new$,old,caret)}function reconcileNested(root,new$,old,caret,container,ci){if(new$===old)return new$&&new$._dom||new$||caret;if(new$ instanceof Array&&old instanceof Array){if(!new$.static)return reconcileCollection(root,new$,old,caret);if(new$.static==old.static){for(var i=0,ary=iter$(new$),len=ary.length;len>i;i++)caret=reconcileNested(root,ary[i],old[i],caret,new$,i);return caret}}else if("string"==typeof new$||new$ instanceof String){var textNode;return old instanceof Text?(old.textContent!=new$&&(old.textContent=new$),textNode=old):(old&&removeNested(root,old,caret),textNode=Imba.document().createTextNode(new$),insertNestedAfter(root,textNode,caret)),container[ci]=caret=textNode}return old&&removeNested(root,old,caret),new$&&(caret=insertNestedAfter(root,new$,caret)),caret}Imba.extendTag("htmlelement",function(tag){tag.prototype.setChildren=function(nodes){return nodes&&nodes.static?this.setStaticChildren(nodes):(this.empty().append(nodes),this._children=nodes),this},tag.prototype.setStaticChildren=function(new$){var $1,$2,old=this._children||[],caret=null;if(1==new$.length&&("string"==typeof new$[$1=0]||new$[$1]instanceof String))return this.setText(new$[$2=0]),new$[$2];old.length&&old.static||(old=[],this.empty());for(var node,i=0,ary=iter$(new$),len=ary.length;len>i;i++)node=ary[i],node===old[i]?node&&node._dom&&(caret=node._dom):caret=reconcileNested(this,node,old[i],caret,new$,i);return this._children=new$,this},tag.prototype.content=function(){return this._content||this.children().toArray()},tag.prototype.setText=function(text){return text!=this._children&&(this.dom().textContent=this._children=text),this}})}()},{}],6:[function(require,module,exports){!function(){"undefined"!=typeof window&&(global=window),Imba={}}()},{}],7:[function(require,module,exports){!function(){function iter$(a){return a?a.toArray?a.toArray():a:[]}Imba.Selector=function(sel,scope,nodes){if(this._query=sel instanceof Imba.Selector?sel.query():sel,this._context=scope,nodes){for(var i=0,ary=iter$(nodes),len=ary.length,res=[];len>i;i++)res.push(tag$wrap(ary[i]));this._nodes=res}return this._lazy=!nodes,this},Imba.Selector.prototype.__query={name:"query"},Imba.Selector.prototype.query=function(v){return this._query},Imba.Selector.prototype.setQuery=function(v){return this._query=v,this},Imba.Selector.prototype.reload=function(){return this._nodes=null,this},Imba.Selector.prototype.scope=function(){var ctx;return this._scope?this._scope:(ctx=this._context)?this._scope=ctx.toScope?ctx.toScope():ctx:Imba.document()},Imba.Selector.prototype.first=function(){return this._lazy?tag$wrap(this._first||(this._first=this.scope().querySelector(this.query()))):this.nodes()[0]},Imba.Selector.prototype.last=function(){return this.nodes()[this._nodes.length-1]},Imba.Selector.prototype.nodes=function(){if(this._nodes)return this._nodes;for(var items=this.scope().querySelectorAll(this.query()),i=0,ary=iter$(items),len=ary.length,res=[];len>i;i++)res.push(tag$wrap(ary[i]));return this._nodes=res,this._lazy=!1,this._nodes},Imba.Selector.prototype.count=function(){return this.nodes().length},Imba.Selector.prototype.len=function(){return this.nodes().length},Imba.Selector.prototype.any=function(){return this.count()},Imba.Selector.prototype.at=function(idx){return this.nodes()[idx]},Imba.Selector.prototype.forEach=function(block){return this.nodes().forEach(block),this},Imba.Selector.prototype.map=function(block){return this.nodes().map(block)},Imba.Selector.prototype.toArray=function(){return this.nodes()},Imba.Selector.prototype.closest=function(sel){return this._nodes=this.map(function(node){return node.closest(sel)}),this},Imba.Selector.prototype.siblings=function(sel){return this._nodes=this.map(function(node){return node.siblings(sel)}),this},Imba.Selector.prototype.find=function(sel){return this._nodes=this.__query__(sel.query(),this.nodes()),this},Imba.Selector.prototype.children=function(sel){return!0},Imba.Selector.prototype.has=function(){return!0},Imba.Selector.prototype.__union=function(){return this.p("called Imba.Selector.__union"),this},Imba.Selector.prototype.__intersect=function(){return this.p("called Imba.Selector.__union"),this},Imba.Selector.prototype.reject=function(blk){return this.filter(blk,!1)},Imba.Selector.prototype.filter=function(blk,bool){void 0===bool&&(bool=!0);var fn=blk instanceof Function&&blk||function(n){return n.matches(blk)},ary=this.nodes().filter(function(n){return fn(n)==bool});return new Imba.Selector("",this._scope,ary)},Imba.Selector.prototype.__query__=function(query,contexts){for(var nodes=[],i=0,l=contexts.length;l>i;)nodes.push.apply(nodes,contexts[i++].querySelectorAll(query));return nodes},Imba.Selector.prototype.__matches__=function(){return!0},Imba.Selector.prototype.flag=function(flag){return this.forEach(function(n){return n.flag(flag)})},Imba.Selector.prototype.unflag=function(flag){return this.forEach(function(n){return n.unflag(flag)})},Imba.Selector.prototype.call=function(meth,args){var self=this;return void 0===args&&(args=[]),self.forEach(function(n){var $1;return self.setFn(n[$1=meth]),n[$1]?self.fn().apply(n,args):void 0})},q$=function(sel,scope){return new Imba.Selector(sel,scope)},q$$=function(sel,scope){var el=(scope||Imba.document()).querySelector(sel);return el&&tag$wrap(el)||null},Imba.extendTag("element",function(tag){tag.prototype.querySelectorAll=function(q){return this._dom.querySelectorAll(q)},tag.prototype.querySelector=function(q){return this._dom.querySelector(q)},tag.prototype.find=function(sel){return new Imba.Selector(sel,this)}})}()},{}]},{},[1])(1)});